(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{10:function(e,t,a){e.exports=a(16)},15:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(5),o=a.n(i),c=(a(15),a(9)),s=a(1),l=a(6),u=a.n(l);var p=function(){return r.a.createElement("header",{className:"header"},r.a.createElement("img",{src:u.a,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f",className:"header__logo"}))},d=r.a.createContext();var m=function(e){var t=e.card,a=e.onCardClick,n=e.onCardLike,i=e.onCardDelete,o=r.a.useContext(d),c=t.owner._id===o._id,s=t.likes.some((function(e){return e._id===o._id})),l="card__trash ".concat(c?"":"card__trash_hidden"),u="card__like ".concat(s?"card__like_active":"");return r.a.createElement("div",{className:"card"},r.a.createElement("img",{className:"card__image",src:t.link,alt:t.name,onClick:function(){a(t)}}),r.a.createElement("h2",{className:"card__title"},t.name),r.a.createElement("p",{className:"card__num-like"},t.likes.length),r.a.createElement("button",{type:"submit",className:u,"aria-label":"\u041b\u0430\u0439\u043a\u043d\u0443\u0442\u044c",onClick:function(){n(t)}}),r.a.createElement("button",{type:"submit",className:l,"aria-label":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",onClick:function(){i(t)}}))};var _=function(e){var t=e.onEditAvatar,a=e.onEditProfile,n=e.onAddPlace,i=e.onCardClick,o=e.onCardLike,c=e.onCardDelete,s=e.cards,l=r.a.useContext(d);return r.a.createElement("main",{className:"content"},r.a.createElement("section",{className:"profile"},r.a.createElement("div",{className:"profile__avatar-container"},r.a.createElement("img",{src:l.avatar,alt:l.name,className:"profile__avatar"}),r.a.createElement("div",{className:"profile__avatar-overlay"},r.a.createElement("button",{type:"button",className:"profile__patchavatar-btn","aria-label":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",onClick:t}))),r.a.createElement("div",{className:"profile__profile-info"},r.a.createElement("h1",{className:"profile__title"},l.name),r.a.createElement("button",{type:"button",className:"profile__edit-button","aria-label":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",onClick:a}),r.a.createElement("p",{className:"profile__subtitle"},l.about)),r.a.createElement("button",{type:"button",className:"profile__add-button","aria-label":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",onClick:n})),r.a.createElement("section",{className:"card-container"},s.map((function(e){return r.a.createElement(m,{key:e._id,card:e,onCardClick:i,onCardLike:o,onCardDelete:c})}))))};var h=function(e){var t=e.name,a=e.title,n=e.children,i=e.btnText,o=e.isOpen,c=e.onClose,s=e.onSubmit,l=e.isSbmtBtnActiv;return r.a.createElement("section",{className:"popup popup_type_".concat(t," ").concat(o?"popup_opened":"")},r.a.createElement("form",{name:t,method:"POST",onSubmit:s,action:"#",className:"popup__form popup__container popup__container_formtype_".concat(t),noValidate:!0},r.a.createElement("h2",{className:"popup__title"},a),n,r.a.createElement("button",{disabled:!l,type:"submit",className:"popup__submit popup__btn popup__btn_action_".concat(t," ").concat(l?"":"popup__btn_disabled")},i),r.a.createElement("button",{type:"reset",className:"popup__btn-close popup__btn-close_formtype_".concat(t),"aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",onClick:c})))};var f=function(e){var t=e.name,a=e.description,n=e.handleChangeName,i=e.handleChangeDescription,o=e.isNameValid,c=e.isDescriptionValid,s=e.validNameMessage,l=e.validDescriptionMessage;return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"text",defaultValue:t,onChange:n,name:"name",placeholder:"\u0418\u043c\u044f",id:"name-input",className:"popup__text popup__text_location_top popup__text_type_name",minLength:"2",maxLength:"40",required:!0,pattern:"[\u0410-\u042f\u0430-\u044fA-Za-z -]{1,}"}),r.a.createElement("span",{className:"popup__text-error ".concat(o?"":"popup__text-error_active"),id:"name-input-error"},s),r.a.createElement("input",{type:"text",defaultValue:a,onChange:i,name:"about",placeholder:"\u041e \u0441\u0435\u0431\u0435",id:"about-input",className:"popup__text popup__text_location_bottom popup__text_type_about",minLength:"2",maxLength:"200",required:!0}),r.a.createElement("span",{className:"popup__text-error ".concat(c?"":"popup__text-error_active"),id:"about-input-error"},l))};var v=function(e){var t=e.isOpen,a=e.onClose,n=e.onUpdateUser,i=e.submitBtnText,o=e.isNameValid,c=e.isDescriptionValid,l=e.validNameMessage,u=e.validDescriptionMessage,p=e.handleChangeProfileName,m=e.handleChangeProfileDescription,_=e.isSbmtBtnActiv,v=r.a.useState(""),b=Object(s.a)(v,2),g=b[0],C=b[1],E=r.a.useState(""),N=Object(s.a)(E,2),k=N[0],y=N[1],x=r.a.useContext(d);return r.a.useEffect((function(){C(x.name),y(x.about)}),[x]),r.a.createElement(h,{name:"edit",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",children:r.a.createElement(f,{name:g,description:k,handleChangeName:function(e){C(e.target.value),p(e)},handleChangeDescription:function(e){y(e.target.value),m(e)},isNameValid:o,isDescriptionValid:c,validNameMessage:l,validDescriptionMessage:u}),btnText:i,isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),n({name:g,about:k})},isSbmtBtnActiv:_})};var b=function(e){var t=e.avatarRef,a=e.isValid,n=e.validationMessage,i=e.handleChangeAvatarInput;return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{ref:t,onChange:i,type:"text",name:"url",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",id:"url-input",className:"popup__text popup__text_location_center popup__text_type_avatar-url",required:!0,pattern:"^(https?:\\/\\/)?([\\da-z\\.-]+)\\.([a-z\\.]{2,6})([\\/\\w\\.-]*)*\\/?$"}),r.a.createElement("span",{className:"popup__text-error ".concat(a?"":"popup__text-error_active"),id:"url-input-error"},n))};var g=function(e){var t=e.isOpen,a=e.onClose,n=e.onUpdateAvatar,i=e.submitBtnText,o=e.isValid,c=e.isSbmtBtnActiv,s=e.validationMessage,l=e.handleChangeAvatarInput,u=r.a.useRef();return r.a.createElement(h,{name:"avatar",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",children:r.a.createElement(b,{avatarRef:u,handleChangeAvatarInput:l,isValid:o,validationMessage:s}),btnText:i,isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),n({avatar:u.current.value}),e.target.reset()},isSbmtBtnActiv:c})};var C=function(e){var t=e.placeRef,a=e.urlRef,n=e.handleChangePlace,i=e.handleChangeUrl,o=e.isPlaceValid,c=e.isUrlValid,s=e.validPlaceMessage,l=e.validUrlMessage;return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{ref:t,type:"text",onChange:n,name:"place",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",id:"place-input",className:"popup__text popup__text_location_top popup__text_type_place",minLength:"2",maxLength:"30",required:!0}),r.a.createElement("span",{className:"popup__text-error ".concat(o?"":"popup__text-error_active"),id:"place-input-error"},s),r.a.createElement("input",{ref:a,type:"text",onChange:i,name:"url",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",id:"url-input",className:"popup__text popup__text_location_bottom popup__text_type_url",required:!0,pattern:"^(https?:\\/\\/)?([\\da-z\\.-]+)\\.([a-z\\.]{2,6})([\\/\\w\\.-]*)*\\/?$"}),r.a.createElement("span",{className:"popup__text-error ".concat(c?"":"popup__text-error_active"),id:"url-input-error"},l))};var E=function(e){var t=e.isOpen,a=e.onClose,n=e.onAddPlace,i=e.submitBtnText,o=e.handleChangePlace,c=e.handleChangeUrl,s=e.isPlaceValid,l=e.isUrlValid,u=e.validPlaceMessage,p=e.validUrlMessage,d=e.isSbmtBtnActiv,m=r.a.useRef(),_=r.a.useRef();return r.a.createElement(h,{name:"add",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",children:r.a.createElement(C,{placeRef:m,urlRef:_,handleChangePlace:o,handleChangeUrl:c,isPlaceValid:s,isUrlValid:l,validPlaceMessage:u,validUrlMessage:p}),btnText:i,isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),n({place:m.current.value,url:_.current.value}),e.target.reset()},isSbmtBtnActiv:d})};var N=function(e){var t=e.cardOpen,a=e.onClose,n=e.cardData;return r.a.createElement("section",{className:"popup popup_type_image ".concat(t?"popup_opened":"")},r.a.createElement("figure",{className:"popup__form popup__img-container"},r.a.createElement("button",{type:"button",className:"popup__btn-close popup__btn-close_formtype_image","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",onClick:a}),r.a.createElement("img",{className:"popup__big-image",src:n.link,alt:n.name}),r.a.createElement("figcaption",{className:"popup__figcaption"},n.name)))};var k=function(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("p",{className:"footer__copyright"},"\xa9 2020 Mesto Russia"))},y=a(7),x=a(8),j=new(function(){function e(t){var a=t.baseUrl,n=t.headers;Object(y.a)(this,e),this._baseUrl=a,this._headers=n}return Object(x.a)(e,[{key:"getUserInfo",value:function(){return fetch(this._baseUrl+"/users/me",{headers:{authorization:this._headers}}).then((function(e){return e.ok?e.json():Promise.reject("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a: ".concat(e.status))}))}},{key:"getInitialCards",value:function(){return fetch(this._baseUrl+"/cards",{headers:{authorization:this._headers}}).then((function(e){return e.ok?e.json():Promise.reject("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a: ".concat(e.status))}))}},{key:"patchUserInfo",value:function(e){return fetch(this._baseUrl+"/users/me",{method:"PATCH",headers:{authorization:this._headers,"Content-Type":"application/json"},body:JSON.stringify({name:e.name,about:e.about})}).then((function(e){return e.ok?e.json():Promise.reject("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a: ".concat(e.status))}))}},{key:"postNewCard",value:function(e){return fetch(this._baseUrl+"/cards",{method:"POST",headers:{authorization:this._headers,"Content-Type":"application/json"},body:JSON.stringify({name:e.place,link:e.url})}).then((function(e){return e.ok?e.json():Promise.reject("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a: ".concat(e.status))}))}},{key:"deleteMyCard",value:function(e){return fetch(this._baseUrl+"/cards/"+e,{method:"DELETE",headers:{authorization:this._headers}}).then((function(e){return e.ok?e.json():Promise.reject("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a: ".concat(e.status))}))}},{key:"putLike",value:function(e){return fetch(this._baseUrl+"/cards/likes/"+e,{method:"PUT",headers:{authorization:this._headers}}).then((function(e){return e.ok?e.json():Promise.reject("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a: ".concat(e.status))}))}},{key:"delLike",value:function(e){return fetch(this._baseUrl+"/cards/likes/"+e,{method:"DELETE",headers:{authorization:this._headers}}).then((function(e){return e.ok?e.json():Promise.reject("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a: ".concat(e.status))}))}},{key:"changeLikeCardStatus",value:function(e,t){return fetch(this._baseUrl+"/cards/likes/"+e,{method:t?"PUT":"DELETE",headers:{authorization:this._headers}}).then((function(e){return e.ok?e.json():Promise.reject("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a: ".concat(e.status))}))}},{key:"patchAvatar",value:function(e){return fetch(this._baseUrl+"/users/me/avatar",{method:"PATCH",headers:{authorization:this._headers,"Content-Type":"application/json"},body:JSON.stringify({avatar:e.avatar})}).then((function(e){return e.ok?e.json():Promise.reject("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a: ".concat(e.status))}))}}]),e}())({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-12",headers:"71b905c5-e266-4c23-af42-a4b6735dea36"});var S=function(){var e=r.a.useState([]),t=Object(s.a)(e,2),a=t[0],n=t[1];r.a.useEffect((function(){j.getInitialCards().then((function(e){n(e)})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430. \u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d: ",e)}))}),[]);var i=r.a.useState(!1),o=Object(s.a)(i,2),l=o[0],u=o[1],m=r.a.useState(!1),f=Object(s.a)(m,2),b=f[0],C=f[1],y=r.a.useState(!1),x=Object(s.a)(y,2),S=x[0],O=x[1],P=r.a.useState(!1),U=Object(s.a)(P,2),M=U[0],A=U[1],D=r.a.useState({}),T=Object(s.a)(D,2),V=T[0],B=T[1],L=r.a.useState({}),w=Object(s.a)(L,2),z=w[0],I=w[1],R=r.a.useState("C\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),q=Object(s.a)(R,2),J=q[0],F=q[1],$=r.a.useState("\u0421\u043e\u0437\u0434\u0430\u0442\u044c"),H=Object(s.a)($,2),W=H[0],Z=H[1],G=r.a.useState(!1),K=Object(s.a)(G,2),Q=K[0],X=K[1],Y=r.a.useState(!1),ee=Object(s.a)(Y,2),te=ee[0],ae=ee[1],ne=r.a.useState(!1),re=Object(s.a)(ne,2),ie=re[0],oe=re[1],ce=r.a.useState(!1),se=Object(s.a)(ce,2),le=se[0],ue=se[1],pe=r.a.useState(!1),de=Object(s.a)(pe,2),me=de[0],_e=de[1],he=r.a.useState(!1),fe=Object(s.a)(he,2),ve=fe[0],be=fe[1],ge=r.a.useState("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"),Ce=Object(s.a)(ge,2),Ee=Ce[0],Ne=Ce[1],ke=r.a.useState("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"),ye=Object(s.a)(ke,2),xe=ye[0],je=ye[1],Se=r.a.useState("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"),Oe=Object(s.a)(Se,2),Pe=Oe[0],Ue=Oe[1],Me=r.a.useState("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"),Ae=Object(s.a)(Me,2),De=Ae[0],Te=Ae[1],Ve=r.a.useState("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"),Be=Object(s.a)(Ve,2),Le=Be[0],we=Be[1];function ze(e){u(!1),C(!1),O(!1),A(!1)}return r.a.useEffect((function(){j.getUserInfo().then((function(e){I(e)})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430. \u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d: ",e)}))}),[]),r.a.useEffect((function(){be(!0===te&&!0===ie)}),[te,ie]),r.a.useEffect((function(){be(!0===le&&!0===me)}),[le,me]),r.a.createElement(d.Provider,{value:z},r.a.createElement("div",{className:"page"},r.a.createElement(p,null),r.a.createElement(_,{onEditAvatar:function(){O(!0),X(!0),be(!1)},onEditProfile:function(){u(!0),ae(!0),je("|"),oe(!0),Ue("|"),be(!0)},onAddPlace:function(){C(!0),ue(!1),Te("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"),_e(!1),we("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"),be(!1)},onCardClick:function(e){A(!0),B({link:e.link,name:e.name})},onCardLike:function(e){var t=e.likes.some((function(e){return e._id===z._id}));j.changeLikeCardStatus(e._id,!t).then((function(t){var r=a.map((function(a){return a._id===e._id?t:a}));n(r)})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430. \u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d: ",e)}))},onCardDelete:function(e){j.deleteMyCard(e._id).then((function(t){var r=a.filter((function(t){return t._id!==e._id}));console.log(t),n(r)})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430. \u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d: ",e)}))},cards:a}),r.a.createElement(v,{isOpen:l,onClose:ze,onUpdateUser:function(e){F("C\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435..."),j.patchUserInfo(e).then((function(e){I(e)})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430. \u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d: ",e)})).finally((function(){F("C\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")})),ze()},submitBtnText:J,isSbmtBtnActiv:ve,handleChangeProfileName:function(e){e.target.validity.valid?(ae(!0),je("|")):(ae(!1),je(e.target.validationMessage))},handleChangeProfileDescription:function(e){e.target.validity.valid?(oe(!0),Ue("|")):(oe(!1),Ue(e.target.validationMessage))},isNameValid:te,isDescriptionValid:ie,validNameMessage:xe,validDescriptionMessage:Pe}),r.a.createElement(g,{isOpen:S,onClose:ze,onUpdateAvatar:function(e){F("C\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435..."),j.patchAvatar(e).then((function(e){I(e)})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430. \u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d: ",e)})).finally((function(){F("C\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")})),ze()},submitBtnText:J,handleChangeAvatarInput:function(e){e.target.validity.valid?(X(!0),be(!0)):(X(!1),be(!1),Ne(e.target.validationMessage))},isValid:Q,isSbmtBtnActiv:ve,validationMessage:Ee}),r.a.createElement(E,{isOpen:b,onClose:ze,onAddPlace:function(e){Z("C\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435..."),j.postNewCard(e).then((function(e){n([e].concat(Object(c.a)(a)))})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430. \u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d: ",e)})).finally((function(){Z("\u0421\u043e\u0437\u0434\u0430\u0442\u044c")})),ze()},submitBtnText:W,isSbmtBtnActiv:ve,handleChangePlace:function(e){e.target.validity.valid?(ue(!0),Te("|")):(ue(!1),Te(e.target.validationMessage))},handleChangeUrl:function(e){e.target.validity.valid?(_e(!0),we("|")):(_e(!1),we(e.target.validationMessage))},isPlaceValid:le,isUrlValid:me,validPlaceMessage:De,validUrlMessage:Le}),r.a.createElement(h,{name:"del",title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",children:"",btnText:"\u0414\u0430"}),r.a.createElement(N,{cardOpen:M,onClose:ze,cardData:V}),r.a.createElement(k,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},6:function(e,t,a){e.exports=a.p+"static/media/header__logo.c6f11019.svg"}},[[10,1,2]]]);
//# sourceMappingURL=main.1bda3c47.chunk.js.map